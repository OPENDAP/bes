prefix = @prefix@
exec_prefix = $(prefix)
bindir = $(exec_prefix)/bin
AR = ar
CXX = @CXX@
INSTALL = @INSTALL@
INSTALL_DATA = @INSTALL_DATA@
INSTALL_PROGRAM = @INSTALL_PROGRAM@

CLIENT_SRCS:=CmdApp.cc CmdClient.cc
CLIENT_OBJS:=CmdApp.o CmdClient.o

PROG:=opendapcmdln

INCS:=-I. -I../ppt -I../dispatch @INCS@
DEPLIBS:=../ppt/libppt.a ../dispatch/libdispatch.a
LDFLAGS:=@LDFLAGS@
LIBS:=@LIBS@

DEFS:=@DEFS@
#CXXFLAGS_DEBUG:=-g3 -O0 -Wall -fno-default-inline -fno-defer-pop
#CXXFLAGS:=$(CXXFLAGS_DEBUG) 
CXXFLAGS:=@CXXFLAGS@ -Wall -Wno-deprecated
CPPFLAGS:=$(CXXFLASGS) $(DEFS) $(INCS)

all : $(PROG)

$(PROG): $(CLIENT_OBJS) $(DEPLIBS)
	$(CXX) $(CXXFLAGS) -o $(PROG) $(CLIENT_OBJS) $(DEPLIBS) $(LDFLAGS) $(LIBS)

.c.o:
	$(CXX) -c $(CFLAGS) $(CPPFLAGS) -o $@ $<

.cc.o:
	$(CXX) -c $(CXXFLAGS) $(CPPFLAGS) -o $@ $<

install: all install-progs

install-progs:
	-mkdir -p $(bindir)
	for x in $(PROG); \
	    do $(INSTALL_PROGRAM) $$x $(bindir); done

Makefile: Makefile.in
	if [ -x ./config.status ]; \
	then \
	    ${SHELL} ./config.status; \
	else \
	    ./configure; \
	fi

.PHONY: depend
depend: 
	@depend@ -m Makefile.in -- $(CPPFLAGS) -- $(CLIENT_SRCS)
	$(MAKE) $(MFLAGS) Makefile

clean :
	-rm -f $(CLIENT_OBJS) $(PROG)

distclean : clean
	-rm -rf Makefile config.status config.log config.cache autom4te.cache ClientConfig.h

# DO NOT DELETE; depend requires this line
CmdApp.o: CmdApp.cc CmdApp.h ../dispatch/OPeNDAPBaseApp.h \
  ../dispatch/OPeNDAPApp.h ../dispatch/OPeNDAPObj.h CmdClient.h \
  ../ppt/PPTException.h
CmdClient.o: CmdClient.cc /usr/include/readline/readline.h \
  /usr/include/readline/history.h CmdClient.h ../ppt/PPTClient.h \
  ../ppt/PPTConnection.h ../ppt/Connection.h ../ppt/Socket.h
