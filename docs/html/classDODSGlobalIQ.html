<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>OPeNDAP Back End Server (BES): DODSGlobalIQ class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.5 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a></div>
<h1>DODSGlobalIQ Class Reference</h1>Mechanism to provide for the orderly initialization and termination of global objects/functions.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="DODSGlobalIQ_8h-source.html">DODSGlobalIQ.h</a>&gt;</code>
<p>
<a href="classDODSGlobalIQ-members.html">List of all members.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>bool&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classDODSGlobalIQ.html#DODSGlobalIQe0">DODSGlobalInit</a> (int argc, char **argv)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">initialize global objects in an orderly fasion.  <a href="#DODSGlobalIQe0"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>bool&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classDODSGlobalIQ.html#DODSGlobalIQe1">DODSGlobalQuit</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Runs the termination functions in reverse order of initialization, providing the application to clean up its global objects.  <a href="#DODSGlobalIQe1"></a><br><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Mechanism to provide for the orderly initialization and termination of global objects/functions. 
<p>
C++ does not provide a good method for the initialization and termination of global objects. The main problem is ordering. This mechanism provides for the order of initialization and an easy to use means of initializing and terminating global objects. Only those global objects that are used within the application are linked into the application, just as in normal global objects. Termination of global objects using this mechanism occurs in the reverse order that they were initialized.<p>
SETTING UP FOR GLOBAL INITIALIZATION<p>
To set up a global object to be initialized you first need to determine in what order the global object should be initialized. The header file DODSInitOrder lists the current order of initialization for OpenDAP objects.<p>
Levels of initialization can have multiple objects being initialized. Initialization occurs in the order of the level. Within the same level initialization is random.<p>
INTEGRATING THE INITIALIZATION CODE<p>
Once you have the correct order for your object, it is time to set up the code that will initialize and terminate your global object. This code should reside in a header and source file named for the global object. For example, TheDODSLog.[hC] is used to initialize TheDODSLog instance. The header file merely declares a pointer to the global object just as you would for normal global objects.<p>
<pre><div>
    // TheGlobalObject.h</pre></div><p>
<pre><div>    #ifndef E_TheGlobalObject_H
    #define E_TheGlobalObject_H</pre></div><p>
<pre><div>    #include &lt;GlobalObject.h&gt;</pre></div><p>
<pre><div>    extern GlobalObject *TheGlobalObject;</pre></div><p>
<pre><div>    #endif
 </pre></div><p>
The source file is where you implement the initialization function and, if necessary, the termination function.<p>
<pre><div>
    // TheGlobalObject.C</pre></div><p>
<pre><div>    #include &lt;TheGlobalObject.h&gt;
    #include &lt;globalObject.h&gt;
    #include &lt;<a class="el" href="DODSInitList_8h.html">DODSInitList.h</a>&gt;</pre></div><p>
<pre><div>    GlobalObject *TheGlobalObject = 0;</pre></div><p>
<pre><div>    static bool
    buildTheGlobalObject(int argc, char **argv)
    {
	TheGlobalObject = new globalObject(...) ;
	return true ;
    }</pre></div><p>
<pre><div>    static bool
    destroyTheGlobalObject(void)
    {
	if(TheGlobalObject) delete TheGlobalObject ;
	return true ;
    }</pre></div><p>
<pre><div>    <a class="el" href="DODSInitList_8h.html#a1">FUNINITQUIT(buildTheGlobalObject, destroyTheGlobalObject, APPL_INIT2)</a>
 </pre></div><p>
The macro FUNINITQUIT takes an initialization function and a termination function to be used in the order specified by the order macro APPL_INIT2, which would be defined in one of TheInit.h header files. If there is nothing to terminate then you could have used the following macro:<p>
<pre><div>
    <a class="el" href="DODSInitList_8h.html#a2">FUNINIT(buildTheGlobalObject, APPL_INIT2)</a>
 </pre></div><p>
The macro FUNINIT only takes an initialization function, no termination function, and the order macro APPL_INIT2.<p>
Each time one of these two macros is used a <a class="el" href="classDODSGlobalInit.html">DODSGlobalInit</a> object is instantiated, passing the specified initialization function and terminiation function (if one is needed) to the constructor along with the level at which these functions will be called and the current <a class="el" href="classDODSGlobalInit.html">DODSGlobalInit</a> object first in line for that level. Remember, multiple initialization functions can be called at any given level, and the calling of these functions within a level is random. What this mechanism provides is an ordering for objects in different levels.<p>
HOW TO INCORPORATE THE CODE INTO YOUR APPLICATION<p>
In the main routine of your application the function <a class="el" href="classDODSGlobalInit.html">DODSGlobalInit</a> is run, which causes the initialization of the global objects to occur. Before exiting your application the function DODSGlobalQuit is run, which causues the terminiation functions to be called, cleaning up all of your global objects. 
<p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="DODSGlobalIQe0" doxytag="DODSGlobalIQ::DODSGlobalInit" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> bool DODSGlobalIQ::DODSGlobalInit </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname" nowrap> <em>argc</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>char **&nbsp;</td>
          <td class="mdname" nowrap> <em>argv</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
initialize global objects in an orderly fasion. 
<p>
There are multiple levels of initialization, which allows for the ordering of global objects to be created, functions to be called, whatever initialization needs to take place for your application. This function traverses the different levels, in order, calling the first initialization function for that level. The initialization object is <a class="el" href="classDODSGlobalInit.html">DODSGlobalInit</a>, which contains an initialization function, a termination function (if one is provided), and a pointer to the next <a class="el" href="classDODSGlobalInit.html">DODSGlobalInit</a> object. So there can be multiple initialization routines called per level.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>argc</em>&nbsp;</td><td>number of arguments being passed in the argv parameter. This is the same as the argc command line argument passed to main. </td></tr>
    <tr><td valign=top><em>argv</em>&nbsp;</td><td>the actual arguments being passed. This is the same as the command line arguments passed to main. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>returns true if initialization is successful, false if initialization fails and the application should terminate. Initialization stops after the first initialization function returns false. </dd></dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="classDODSGlobalInit.html">DODSGlobalInit</a> </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="DODSGlobalIQe1" doxytag="DODSGlobalIQ::DODSGlobalQuit" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> bool DODSGlobalIQ::DODSGlobalQuit </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Runs the termination functions in reverse order of initialization, providing the application to clean up its global objects. 
<p>
This function traverses the levels in reverse order calling the first termination function in that level.<p>
<dl compact><dt><b>Returns:</b></dt><dd>Returns true at this time. If termination fails for some reason termination continues on. </dd></dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="classDODSGlobalInit.html">DODSGlobalInit</a> </dd></dl>
    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="DODSGlobalIQ_8h-source.html">DODSGlobalIQ.h</a><li><a class="el" href="DODSGlobalIQ_8cc.html">DODSGlobalIQ.cc</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Tue Nov 15 10:29:01 2005 for OPeNDAP Back End Server (BES) by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.5 </small></address>
</body>
</html>
