# Process with autom4te to create an -*- Autotest -*- test suite.

AT_INIT([modules/fileout_netcdf/tests testsuite_nasa])

AT_TESTED([besstandalone])

m4_include([../../common/handler_tests_macros.m4])
m4_include([local_handler_tests_macros.m4])

dnl Add HDF5 CF direct DMR response tests for NASA files
dnl ncdump header only
AT_BESCMD_NETCDF_RESPONSE_TEST_NC4_ENHANCED_CFDMR_HDR(nasa-bescmd-h5cfdmr/OMI_L3.nc4.h5.bescmd)
AT_BESCMD_NETCDF_RESPONSE_TEST_NC4_ENHANCED_CFDMR_HDR(nasa-bescmd-h5cfdmr/1A.GPM.GMI.COUNT2014v3.20140305-S061920-E075148.000087.V03A.h5.bescmd)
AT_BESCMD_NETCDF_RESPONSE_TEST_NC4_ENHANCED_CFDMR_HDR(nasa-bescmd-h5cfdmr/2A.GPM.GMI.GPROF2014v1-4.20140921-S002001-E015234.003195.V03C.h5.bescmd)
AT_BESCMD_NETCDF_RESPONSE_TEST_NC4_ENHANCED_CFDMR_HDR(nasa-bescmd-h5cfdmr/3A-MO.GPM.GMI.GRID2014R1.20140601-S000000-E235959.06.V03A.h5.bescmd)
AT_BESCMD_NETCDF_RESPONSE_TEST_NC4_ENHANCED_CFDMR_HDR(nasa-bescmd-h5cfdmr/A20030602003090.L3m_MO_AT108_CHL_chlor_a_4km.h5.bescmd)
#AirMSPI_ER2_GRP_ELLIPSOID_20161006_181726Z_CA-NewberrySprings_SWPF_F01_V006.he5.bescmd
AT_BESCMD_NETCDF_RESPONSE_TEST_NC4_ENHANCED_CFDMR_HDR(nasa-bescmd-h5cfdmr/Arctas-car_p3b_20080407_2002_Level1C_20171121.nc.h5.bescmd)
AT_BESCMD_NETCDF_RESPONSE_TEST_NC4_ENHANCED_CFDMR_HDR(nasa-bescmd-h5cfdmr/ATL03_20181014084920_02400109_003_01.h5.bescmd)
AT_BESCMD_NETCDF_RESPONSE_TEST_NC4_ENHANCED_CFDMR_HDR(nasa-bescmd-h5cfdmr/ATL08_20181014084920_02400109_003_01.h5.bescmd)
AT_BESCMD_NETCDF_RESPONSE_TEST_NC4_ENHANCED_CFDMR_HDR(nasa-bescmd-h5cfdmr/ATL13_20190330212241_00250301_002_01.h5.bescmd)
AT_BESCMD_NETCDF_RESPONSE_TEST_NC4_ENHANCED_CFDMR_HDR(nasa-bescmd-h5cfdmr/DeepBlue-SeaWiFS-1.0_L3_20100613_v004-20130604T133539Z.h5.bescmd)
AT_BESCMD_NETCDF_RESPONSE_TEST_NC4_ENHANCED_CFDMR_HDR(nasa-bescmd-h5cfdmr/DeepBlue-SeaWiFS_L2_20100101T003505Z_v004-20130524T141300Z.h5.bescmd)
#    GLAH13_633_2103_001_1317_0_01_0001.h5.bescmd
AT_BESCMD_NETCDF_RESPONSE_TEST_NC4_ENHANCED_CFDMR_HDR(nasa-bescmd-h5cfdmr/GOZ-Source-MLP_HCl_ev1-00_2005.nc4.h5.bescmd)
AT_BESCMD_NETCDF_RESPONSE_TEST_NC4_ENHANCED_CFDMR_HDR(nasa-bescmd-h5cfdmr/LPRM-AMSR2_L2_D_SOILM2_V001_20120702231838.nc4.h5.bescmd)
AT_BESCMD_NETCDF_RESPONSE_TEST_NC4_ENHANCED_CFDMR_HDR(nasa-bescmd-h5cfdmr/LPRM-AMSR2_L3_A_SOILM3_V001_20121216010911.nc4.h5.bescmd)
AT_BESCMD_NETCDF_RESPONSE_TEST_NC4_ENHANCED_CFDMR_HDR(nasa-bescmd-h5cfdmr/mabel_l2a_20110322T165030_005_1.h5.bescmd)
AT_BESCMD_NETCDF_RESPONSE_TEST_NC4_ENHANCED_CFDMR_HDR(nasa-bescmd-h5cfdmr/matched-airs.aqua_cloudsat-v3.1-2006.06.15.239_airs.nc4.h5.bescmd)
AT_BESCMD_NETCDF_RESPONSE_TEST_NC4_ENHANCED_CFDMR_HDR(nasa-bescmd-h5cfdmr/matched-airs.aqua_cloudsat-v3.1-2011.03.11.001_amsu.nc4.h5.bescmd)
AT_BESCMD_NETCDF_RESPONSE_TEST_NC4_ENHANCED_CFDMR_HDR(nasa-bescmd-h5cfdmr/OMI-Aura_L2-OMIAuraAER_2006m0815t130241-o11086_v01-00-2018m0529t115547.h5.bescmd)
AT_BESCMD_NETCDF_RESPONSE_TEST_NC4_ENHANCED_CFDMR_HDR(nasa-bescmd-h5cfdmr/OMPS-NPP_NMTO3-L3-DAILY_v2.1_2018m0102_2018m0104t012837.h5.bescmd)
AT_BESCMD_NETCDF_RESPONSE_TEST_NC4_ENHANCED_CFDMR_HDR(nasa-bescmd-h5cfdmr/Q20103372010343.L3m_7D_SCIB1_V1.0_SSS_1deg.h5.bescmd)
AT_BESCMD_NETCDF_RESPONSE_TEST_NC4_ENHANCED_CFDMR_HDR(nasa-bescmd-h5cfdmr/Q2012034.L3m_DAY_SCI_V5.0_SSS_1deg.h5.bescmd)
AT_BESCMD_NETCDF_RESPONSE_TEST_NC4_ENHANCED_CFDMR_HDR(nasa-bescmd-h5cfdmr/Q2011149002900.L2_SCI_V1.0.bz2.0.bz2.0.h5.bescmd)
#Q20111722011263.L3b_SNSU_EVSCI_V1.2.main.h5.bescmd
AT_BESCMD_NETCDF_RESPONSE_TEST_NC4_ENHANCED_CFDMR_HDR(nasa-bescmd-h5cfdmr/S20030602003090.L3m_MO_ST92_CHL_chlor_a_9km.h5.bescmd)
AT_BESCMD_NETCDF_RESPONSE_TEST_NC4_ENHANCED_CFDMR_HDR(nasa-bescmd-h5cfdmr/S5PNRTIL2NO220180422T00470920180422T005209027060100110820180422T022729.nc.h5.bescmd)
#When looping through the HDF5 attributes of an HDF5 object, the attribute order for SMAP L1C and SMAP_L3 are different
#on Mac. So this causes the DMR output different on Mac and thus a test failure.
#Now we just temporarily turn off these tests. 2021-11-15
#AT_BESCMD_NETCDF_RESPONSE_TEST_NC4_ENHANCED_CFDMR_HDR(nasa-bescmd-h5cfdmr/SMAP_L1C_S0_HIRES_02298_A_20150707T160502_R13080_001.h5.bescmd)
#AT_BESCMD_NETCDF_RESPONSE_TEST_NC4_ENHANCED_CFDMR_HDR(nasa-bescmd-h5cfdmr/SMAP_L3_SM_P_20150406_R14010_001.h5.bescmd)
AT_BESCMD_NETCDF_RESPONSE_TEST_NC4_ENHANCED_CFDMR_HDR(nasa-bescmd-h5cfdmr/TOMS-N7_L2-TOMSN7AERUV_1991m0630t0915-o64032_v02-00-2015m0918t123456.h5.bescmd)
AT_BESCMD_NETCDF_RESPONSE_TEST_NC4_ENHANCED_CFDMR_HDR(nasa-bescmd-h5cfdmr/20020602090000-JPL-L4_GHRSST-SSTfnd-MUR-GLOB-v02.0-fv04.1.h5.bescmd)

#Turn off this test since it uses a lot of memory. It may cause the exit 137(out of memory failure) in a limited testing machine. 2022-08-30
#AT_BESCMD_NETCDF_RESPONSE_TEST_NC4_ENHANCED_CFDMR_HDR(nasa-bescmd-h5cfdmr/3A.GPM.DPR.algName.20180331-S221135-E234357.076185.V00B.HDF5.bescmd)
AT_BESCMD_NETCDF_RESPONSE_TEST_NC4_ENHANCED_CFDMR_HDR(nasa-bescmd-h5cfdmr/BUV-Nimbus04_L3zm_v01-00-2012m0203t144121.h5.bescmd)
AT_BESCMD_NETCDF_RESPONSE_TEST_NC4_ENHANCED_CFDMR_HDR(nasa-bescmd-h5cfdmr/DeepBlue-SeaWiFS-1.0_L3_19970903_v003-20111127T185012Z.h5.bescmd)
AT_BESCMD_NETCDF_RESPONSE_TEST_NC4_ENHANCED_CFDMR_HDR(nasa-bescmd-h5cfdmr/DeepBlue-SeaWiFS-1.0_L3_20100101_v002-20110527T191319Z.h5.bescmd)
AT_BESCMD_NETCDF_RESPONSE_TEST_NC4_ENHANCED_CFDMR_HDR(nasa-bescmd-h5cfdmr/GSSTF.2b.2008.01.01.he5.bescmd)
AT_BESCMD_NETCDF_RESPONSE_TEST_NC4_ENHANCED_CFDMR_HDR(nasa-bescmd-h5cfdmr/GSSTFYC.3.Year.1988_2008.he5.bescmd)
AT_BESCMD_NETCDF_RESPONSE_TEST_NC4_ENHANCED_CFDMR_HDR(nasa-bescmd-h5cfdmr/HIRDLS-Aura_L2_v06-00-00-c01_2008d001.he5.bescmd)
AT_BESCMD_NETCDF_RESPONSE_TEST_NC4_ENHANCED_CFDMR_HDR(nasa-bescmd-h5cfdmr/HIRDLS-Aura_L3SCOL_v06-00-00-c02_2005d022-2008d077.he5.bescmd)
AT_BESCMD_NETCDF_RESPONSE_TEST_NC4_ENHANCED_CFDMR_HDR(nasa-bescmd-h5cfdmr/HIRDLS-Aura_L3ZAD_v06-00-00-c02_2005d022-2008d077.he5.bescmd)
AT_BESCMD_NETCDF_RESPONSE_TEST_NC4_ENHANCED_CFDMR_HDR(nasa-bescmd-h5cfdmr/MLS-Aura_L2GP-BrO_v02-23-c01_2010d255.he5.bescmd)
AT_BESCMD_NETCDF_RESPONSE_TEST_NC4_ENHANCED_CFDMR_HDR(nasa-bescmd-h5cfdmr/MLS-Aura_L2GP-O3_v03-40-NRT-06-c01_2013d024t0010.he5.bescmd)
AT_BESCMD_NETCDF_RESPONSE_TEST_NC4_ENHANCED_CFDMR_HDR(nasa-bescmd-h5cfdmr/MLS-Aura_L2GP-Temperature_v03-33-c01_2011d316.he5.bescmd)
AT_BESCMD_NETCDF_RESPONSE_TEST_NC4_ENHANCED_CFDMR_HDR(nasa-bescmd-h5cfdmr/MOP03T-20131129-L3V4.2.1.h5.bescmd)
AT_BESCMD_NETCDF_RESPONSE_TEST_NC4_ENHANCED_CFDMR_HDR(nasa-bescmd-h5cfdmr/OMI-Aura_L2-OMBRO_2012m1204t1200-o44623_v003-2012m1204t185453.he5.bescmd)
AT_BESCMD_NETCDF_RESPONSE_TEST_NC4_ENHANCED_CFDMR_HDR(nasa-bescmd-h5cfdmr/OMI-Aura_L2-OMNO2_2016m0215t0210-o61626_v003-2016m0215t200753.he5.bescmd)
AT_BESCMD_NETCDF_RESPONSE_TEST_NC4_ENHANCED_CFDMR_HDR(nasa-bescmd-h5cfdmr/OMI-Aura_L2-OMUVB_2006m0104t0019-o07831_v003-2008m0716t0249.he5.bescmd)
AT_BESCMD_NETCDF_RESPONSE_TEST_NC4_ENHANCED_CFDMR_HDR(nasa-bescmd-h5cfdmr/OMI-Aura_L2G-OMTO3G_2004m1001_v003-2009m0602t123920.he5.bescmd)
AT_BESCMD_NETCDF_RESPONSE_TEST_NC4_ENHANCED_CFDMR_HDR(nasa-bescmd-h5cfdmr/OMI-Aura_L3-OMAEROe_2012m0213_v003-2012m0215t021315.he5.bescmd)
AT_BESCMD_NETCDF_RESPONSE_TEST_NC4_ENHANCED_CFDMR_HDR(nasa-bescmd-h5cfdmr/OMI-Aura_L3-OMAERUVd_2009m0109_v003-2011m1203t141123.he5.bescmd)
AT_BESCMD_NETCDF_RESPONSE_TEST_NC4_ENHANCED_CFDMR_HDR(nasa-bescmd-h5cfdmr/OMI-Aura_L3-OMSO2e_2012m0101_v003-2012m0103t014459.he5.bescmd)
AT_BESCMD_NETCDF_RESPONSE_TEST_NC4_ENHANCED_CFDMR_HDR(nasa-bescmd-h5cfdmr/SBUV2-NOAA17_L2-SBUV2N17L2_2011m1231_v01-01-2012m0905t152911.h5.bescmd)
AT_BESCMD_NETCDF_RESPONSE_TEST_NC4_ENHANCED_CFDMR_HDR(nasa-bescmd-h5cfdmr/TES-Aura_L2-O3-Nadir_r0000011015_F05_07.he5.bescmd)
AT_BESCMD_NETCDF_RESPONSE_TEST_NC4_ENHANCED_CFDMR_HDR(nasa-bescmd-h5cfdmr/TES-Aura_L3-CH4_r0000010410_F01_07.he5.bescmd)
AT_BESCMD_NETCDF_RESPONSE_TEST_NC4_ENHANCED_CFDMR_HDR(nasa-bescmd-h5cfdmr/acos_L2s_110419_43_Production_v110110_L2s2800_r01_PolB_110430192739.h5.bescmd)

#  big array size test - input from dap reader's xml file
AT_BESCMD_NETCDF_RESPONSE_TEST_NC4_ENHANCED_CFDMR_HDR(nasa-bescmd-h5cfdmr/test_ba_h5_whole.bescmd)

#  big array size test - input from an HDF5 file
AT_BESCMD_NETCDF_RESPONSE_TEST_NC4_ENHANCED_CFDMR_HDR(nasa-bescmd-h5cfdmr/test_ba_grp_dim_whole.h5.bescmd)

#  big array size test - input from DMRPP files
AT_BESCMD_NETCDF_RESPONSE_TEST_NC4_ENHANCED_CFDMR_HDR(nasa-bescmd-h5cfdmr/test_ba_grp_dim_whole.cf.dmrpp.bescmd)

# Big array real NASA file: The size of a variable precip is 365*8075*7814*4/1024/1024/1024=85GB. Note: it takes long time and huge memory.So we turn it off by default.
#AT_BESCMD_NETCDF_RESPONSE_TEST_NC4_ENHANCED_CFDMR_HDR(nasa-bescmd-h5cfdmr/daymet_v4_daily_na_prcp_2010.nc.h5.bescmd)


AT_BESCMD_NETCDF_RESPONSE_TEST_NC4_ENHANCED_CFDMR_HDR(nasa-bescmd-h5cfdmr/eos5_sin_multi_grids.bescmd)
AT_BESCMD_NETCDF_RESPONSE_TEST_NC4_ENHANCED_CFDMR_HDR(nasa-bescmd-h5cfdmr/eos5_sin_one_grid.bescmd)
AT_BESCMD_NETCDF_RESPONSE_TEST_NC4_ENHANCED_CFDMR_HDR(nasa-bescmd-h5cfdmr/eos5lamaz.h5.bescmd)
AT_BESCMD_NETCDF_RESPONSE_TEST_NC4_ENHANCED_CFDMR_HDR(nasa-bescmd-h5cfdmr/eos5ps.h5.bescmd)
AT_BESCMD_NETCDF_RESPONSE_TEST_NC4_ENHANCED_CFDMR_HDR(nasa-bescmd-h5cfdmr/good_imerge.h5.bescmd)
#AT_BESCMD_NETCDF_RESPONSE_TEST_NC4_ENHANCED_CFDMR_HDR(nasa-bescmd-h5cfdmr/oco2_L1bScGL_05619a_150723_B7000_150723203202.h5.bescmd)
AT_BESCMD_NETCDF_RESPONSE_TEST_NC4_ENHANCED_CFDMR_HDR(nasa-bescmd-h5cfdmr/oco2_L2StdND_03945a_150330_B6000_150331024816.h5.bescmd)
AT_BESCMD_NETCDF_RESPONSE_TEST_NC4_ENHANCED_CFDMR_HDR(nasa-bescmd-h5cfdmr/oco2_LtCO2_180102_B9003r_180929105747s.nc4.h5.bescmd)

#When looping through the HDF5 attributes of an HDF5 object, the attribute order for SMAP L1C,SMAP_L3 and f16ssmi are different
#on Mac. So this causes the DMR output different on Mac and thus an expected failure.
AT_BESCMD_NETCDF_RESPONSE_TEST_NC4_ENHANCED_CFDMR_HDR_OS(nasa-bescmd-h5cfdmr/SMAP_L1C_S0_HIRES_02298_A_20150707T160502_R13080_001.h5.bescmd)
AT_BESCMD_NETCDF_RESPONSE_TEST_NC4_ENHANCED_CFDMR_HDR_OS(nasa-bescmd-h5cfdmr/SMAP_L3_SM_P_20150406_R14010_001.h5.bescmd)
AT_BESCMD_NETCDF_RESPONSE_TEST_NC4_ENHANCED_CFDMR_HDR_OS(nasa-bescmd-h5cfdmr/SMAP_L3_SM_P_E_20211030_R18240_001.h5.constraint.bescmd)
AT_BESCMD_NETCDF_RESPONSE_TEST_NC4_ENHANCED_CFDMR_HDR_OS(nasa-bescmd-h5cfdmr/f16_ssmis_20031026v7.nc.h5.bescmd)

#Disk cache
AT_BESCMD_NETCDF_RESPONSE_TEST_NC4_ENHANCED_CFDMR_HDR(nasa-bescmd-h5cfdmr/S5P_RPRO_L1B_RA_BD5_20180430T001950_20180430T020120_02818_03_020100_20220630T164522_subset.nc.h5.bescmd)

