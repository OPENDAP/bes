
$Id$

Installing the HDF4 handler for the OPeNDAP server.

Updated for version 3.7.12

---------------------------------------------------------------------------

BUILDING THE SOFTWARE
REQUIREMENTS
NOTES

---------------------------------------------------------------------------

BUILDING THE SOFTWARE

0) Please skim REQUIREMENTS and NOTES sections of this file before reporting
   problems. Thanks.

1) Type `./configure' at the system prompt. On some systems you may have to
   type `sh configure.' If you want this part of the server to install
   someplace other than /usr/local/bin, use --prefix to change the prefix
   from the default "/use/local/." Make sure that the dap-server CGI knows
   where the handler is located (you can list the complete pathname in the
   dap-server.rc file; see dap-server's INSTALL and README files).

2) Type `make' to build the three server programs

3) Install the server components in $prefix by running `make install.'

4) Type 'make bes-conf' to run the bes-nc-data.sh script which inserts the
   handler in the bes.conf file and adds test data to 
   $prefix/share/hyrax/data.

5) For many installations, you must arrange for your operating system to find
   the shared libraries installed by default in $prefix/lib. Do this by
   either setting an environment variable such as LD_LIBRARY_PATH or by
   editing /etc/ld.so.conf. Different operating systems handle this in
   different ways.

Building from Our SVN Repository

  If you are building from a SVN checkout, run 'autoreconf --verbose' before
  './configure; make'. If you try to run autoconf, et c., by hand and wind up
  with build files that don't work, use 'autoreconf --force --verbose'. Once
  autoreconf has made the configure and Makefile.in files, do ./configure;
  make; make install as outlined above.

REQUIREMENTS

  o You need the libdap library version 3.9.0 to build and install this
    software. If you're using Linux, this means either building form source
    or using the libdap and libdap-devel RPM packages.

  o If you're planning on using this with the OPeNDAP 4 Data Server (Hyrax),
    you'll need version 3.7.0 of the BES software. Make sure to build that 
    first.

  o You also need a recent copy of HDF4. We've tested this server with
    version 4.2r1 and 4.2r4, although any recent version should work fine. 
    In order to link with 42.r4 on Linux (and maybe other platforms) I had to
    compile HDF4 using --without-fortran --with-pic and I also used 
    --without-netcdf (because some sites need their HDF4 libraries built that
    way and I wanted to be sure the handler would build with that 
    configuration). If the configure script cannot find your copy of hdf4, use
    the --with-hdf options to tell it where to look (see configure --help).

NOTES

  o This handler uses a configuration parameter, set in the bes.conf file, to
    control where copies of some metadata objects built by the server are 
    cached. By default this cache is in /tmp - you are encouraged to change
    that. Set the location using the 'HDF4.CacheDir' parameter. For example,
    if you have set the BES.CacheDir parameter to /var/run/bes/cache you might
    set HDF4.CacheDir to /var/run/bes/hdf4_cache. 

  o DEBUGGING AIDS

    - The OPeNDAP libdap library includes the following debugging aids that
      may be of help to you in developing new applications.

    - DBG: simple program instrumentation -- see the file debug.h distributed
      with libdap (which is installed in the libdap header directory; use
      'config-libdap --cflags' and look at the value if -I).

    - DBG2: more elaborate program instrumentation -- by convention this is
      used for output that is half a page or more, while DEBUG is used for
      single line output.

    - To build with program instrumentation use `--enable-debug=<level>'
      where <level> is 1 or 2.

    - By default, both debug and dbnew are *not* enabled. Thus, if you want
      to build a straight version of the libraries and test code, use
      `./configure'. If you want the extra features, use:

      ./configure --enable-dbnew --enable-debug=2
