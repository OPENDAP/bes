<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>bes: BESH4Cache Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">bes<span id="projectnumber">&#160;Updated for version 3.21.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(1); });
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',false,false,'search.php','Search',true);
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('d4/ddd/classBESH4Cache.html','../../'); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="../../d7/dc2/classBESH4Cache-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">BESH4Cache Class Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Collaboration diagram for BESH4Cache:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/dea/classBESH4Cache__coll__graph.png" border="0" usemap="#aBESH4Cache_coll__map" alt="Collaboration graph"/></div>
<map name="aBESH4Cache_coll__map" id="aBESH4Cache_coll__map">
<area shape="rect" title=" " alt="" coords="75,532,270,757"/>
<area shape="rect" href="../../dd/d75/classBESFileLockingCache.html" title="Implementation of a caching mechanism for compressed data." alt="" coords="5,140,172,440"/>
<area shape="poly" title=" " alt="" coords="130,453,149,531,143,532,125,454"/>
<area shape="rect" href="../../d9/d76/classBESObj.html" title="top level BES object to house generic methods" alt="" coords="44,5,133,91"/>
<area shape="poly" title=" " alt="" coords="91,104,91,140,86,140,86,104"/>
<area shape="rect" title=" " alt="" coords="197,257,269,323"/>
<area shape="poly" title=" " alt="" coords="230,323,197,516,192,515,225,322"/>
<area shape="rect" title=" " alt="" coords="173,8,292,88"/>
<area shape="poly" title=" " alt="" coords="235,102,235,257,230,257,230,102"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a39d6af89035d5c9b5e1aff4e0590a8cc" id="r_a39d6af89035d5c9b5e1aff4e0590a8cc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/db9/classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d75/classBESFileLockingCache.html#a39d6af89035d5c9b5e1aff4e0590a8cc">cache_enabled</a> () const</td></tr>
<tr class="separator:a39d6af89035d5c9b5e1aff4e0590a8cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af20f88f95e392135f43621d6d29a42f4" id="r_af20f88f95e392135f43621d6d29a42f4"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="../../d9/db9/classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d75/classBESFileLockingCache.html#af20f88f95e392135f43621d6d29a42f4">cache_too_big</a> (unsigned long long current_size) const</td></tr>
<tr class="memdesc:af20f88f95e392135f43621d6d29a42f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">look at the cache size; is it too large? Look at the cache size and see if it is too big.  <br /></td></tr>
<tr class="separator:af20f88f95e392135f43621d6d29a42f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e12d93d7fe5f5f03190f92362773050" id="r_a9e12d93d7fe5f5f03190f92362773050"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="../../d9/db9/classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d75/classBESFileLockingCache.html#a9e12d93d7fe5f5f03190f92362773050">create_and_lock</a> (const std::string &amp;target, <a class="el" href="../../d1/da0/classint.html">int</a> &amp;fd)</td></tr>
<tr class="memdesc:a9e12d93d7fe5f5f03190f92362773050"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a file in the cache and lock it for write access.  <br /></td></tr>
<tr class="separator:a9e12d93d7fe5f5f03190f92362773050"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1a1e37ad99b3e5a63945f94e1e3d934" id="r_ad1a1e37ad99b3e5a63945f94e1e3d934"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d75/classBESFileLockingCache.html#ad1a1e37ad99b3e5a63945f94e1e3d934">disable</a> ()</td></tr>
<tr class="memdesc:ad1a1e37ad99b3e5a63945f94e1e3d934"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disable the cache.  <br /></td></tr>
<tr class="separator:ad1a1e37ad99b3e5a63945f94e1e3d934"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeced251b414de8f2981938d813f39314" id="r_aeced251b414de8f2981938d813f39314"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d75/classBESFileLockingCache.html#aeced251b414de8f2981938d813f39314">dump</a> (std::ostream &amp;strm) const override</td></tr>
<tr class="memdesc:aeced251b414de8f2981938d813f39314"><td class="mdescLeft">&#160;</td><td class="mdescRight">dumps information about this object  <br /></td></tr>
<tr class="separator:aeced251b414de8f2981938d813f39314"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f797d80ea5fd50d236f1f19d1c885cf" id="r_a8f797d80ea5fd50d236f1f19d1c885cf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d75/classBESFileLockingCache.html#a8f797d80ea5fd50d236f1f19d1c885cf">enable</a> ()</td></tr>
<tr class="memdesc:a8f797d80ea5fd50d236f1f19d1c885cf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable the cache.  <br /></td></tr>
<tr class="separator:a8f797d80ea5fd50d236f1f19d1c885cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa75f998ba8f95f88ba25624ff300f3ec" id="r_aa75f998ba8f95f88ba25624ff300f3ec"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d75/classBESFileLockingCache.html#aa75f998ba8f95f88ba25624ff300f3ec">exclusive_to_shared_lock</a> (<a class="el" href="../../d1/da0/classint.html">int</a> fd)</td></tr>
<tr class="memdesc:aa75f998ba8f95f88ba25624ff300f3ec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Transfer from an exclusive lock to a shared lock.  <br /></td></tr>
<tr class="separator:aa75f998ba8f95f88ba25624ff300f3ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5af3a28f966bbc4b0e942de947835316" id="r_a5af3a28f966bbc4b0e942de947835316"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d75/classBESFileLockingCache.html#a5af3a28f966bbc4b0e942de947835316">get_cache_directory</a> () const</td></tr>
<tr class="separator:a5af3a28f966bbc4b0e942de947835316"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe5c91d47aeace35bd4fe77615d3eb91" id="r_afe5c91d47aeace35bd4fe77615d3eb91"><td class="memItemLeft" align="right" valign="top">virtual std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d75/classBESFileLockingCache.html#afe5c91d47aeace35bd4fe77615d3eb91">get_cache_file_name</a> (const std::string &amp;src, <a class="el" href="../../d9/db9/classbool.html">bool</a> mangle=true)</td></tr>
<tr class="separator:afe5c91d47aeace35bd4fe77615d3eb91"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:addccfa6faacadaa0389dee8f18566d2b" id="r_addccfa6faacadaa0389dee8f18566d2b"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d75/classBESFileLockingCache.html#addccfa6faacadaa0389dee8f18566d2b">get_cache_file_prefix</a> () const</td></tr>
<tr class="separator:addccfa6faacadaa0389dee8f18566d2b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20d19ed9a8c96bedf8422316b3e8fafa" id="r_a20d19ed9a8c96bedf8422316b3e8fafa"><td class="memItemLeft" align="right" valign="top">virtual unsigned long long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d75/classBESFileLockingCache.html#a20d19ed9a8c96bedf8422316b3e8fafa">get_cache_size</a> ()</td></tr>
<tr class="memdesc:a20d19ed9a8c96bedf8422316b3e8fafa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the cache size.  <br /></td></tr>
<tr class="separator:a20d19ed9a8c96bedf8422316b3e8fafa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2bca0cf643efb0a6d22cd7a5f4b3d6ea" id="r_a2bca0cf643efb0a6d22cd7a5f4b3d6ea"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/db9/classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2bca0cf643efb0a6d22cd7a5f4b3d6ea">get_data_from_cache</a> (const std::string &amp;cache_file_name, const <a class="el" href="../../d1/da0/classint.html">int</a> expected_file_size, <a class="el" href="../../d1/da0/classint.html">int</a> &amp;fd)</td></tr>
<tr class="separator:a2bca0cf643efb0a6d22cd7a5f4b3d6ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0447cb98e124a3deb742ae94c87f0b5" id="r_ad0447cb98e124a3deb742ae94c87f0b5"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="../../d9/db9/classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d75/classBESFileLockingCache.html#ad0447cb98e124a3deb742ae94c87f0b5">get_exclusive_lock</a> (const std::string &amp;target, <a class="el" href="../../d1/da0/classint.html">int</a> &amp;fd)</td></tr>
<tr class="separator:ad0447cb98e124a3deb742ae94c87f0b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc6a817d4bfc6756547a9b282c6405c5" id="r_adc6a817d4bfc6756547a9b282c6405c5"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="../../d9/db9/classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d75/classBESFileLockingCache.html#adc6a817d4bfc6756547a9b282c6405c5">get_exclusive_lock_nb</a> (const std::string &amp;target, <a class="el" href="../../d1/da0/classint.html">int</a> &amp;fd)</td></tr>
<tr class="separator:adc6a817d4bfc6756547a9b282c6405c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9ae66ea9b3931933f3f4e02562a8d04" id="r_aa9ae66ea9b3931933f3f4e02562a8d04"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="../../d9/db9/classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d75/classBESFileLockingCache.html#aa9ae66ea9b3931933f3f4e02562a8d04">get_read_lock</a> (const std::string &amp;target, <a class="el" href="../../d1/da0/classint.html">int</a> &amp;fd)</td></tr>
<tr class="memdesc:aa9ae66ea9b3931933f3f4e02562a8d04"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a read-only lock on the file if it exists.  <br /></td></tr>
<tr class="separator:aa9ae66ea9b3931933f3f4e02562a8d04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a500a4ca2539d42c5aa7c9a702f0647b8" id="r_a500a4ca2539d42c5aa7c9a702f0647b8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d75/classBESFileLockingCache.html#a500a4ca2539d42c5aa7c9a702f0647b8">initialize</a> (const std::string &amp;cache_dir, const std::string &amp;prefix, unsigned long long size)</td></tr>
<tr class="memdesc:a500a4ca2539d42c5aa7c9a702f0647b8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize an instance of FileLockingCache.  <br /></td></tr>
<tr class="separator:a500a4ca2539d42c5aa7c9a702f0647b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b15a24dc9884008c01e487b25da7fbb" id="r_a5b15a24dc9884008c01e487b25da7fbb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/db9/classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d75/classBESFileLockingCache.html#a5b15a24dc9884008c01e487b25da7fbb">is_unlimited</a> () const</td></tr>
<tr class="memdesc:a5b15a24dc9884008c01e487b25da7fbb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Is this cache allowed to store as much as it wants?  <br /></td></tr>
<tr class="separator:a5b15a24dc9884008c01e487b25da7fbb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b90e5296f6e8f6436851876911ad6a3" id="r_a4b90e5296f6e8f6436851876911ad6a3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/db9/classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4b90e5296f6e8f6436851876911ad6a3">is_valid</a> (const std::string &amp;cache_file_name, const <a class="el" href="../../d1/da0/classint.html">int</a> expected_file_size) const</td></tr>
<tr class="separator:a4b90e5296f6e8f6436851876911ad6a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af097935543e9f85317b6751ac9d20a88" id="r_af097935543e9f85317b6751ac9d20a88"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d75/classBESFileLockingCache.html#af097935543e9f85317b6751ac9d20a88">purge_file</a> (const std::string &amp;file)</td></tr>
<tr class="memdesc:af097935543e9f85317b6751ac9d20a88"><td class="mdescLeft">&#160;</td><td class="mdescRight">Purge a single file from the cache.  <br /></td></tr>
<tr class="separator:af097935543e9f85317b6751ac9d20a88"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5777955384b133127a2518f44ea28444" id="r_a5777955384b133127a2518f44ea28444"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d75/classBESFileLockingCache.html#a5777955384b133127a2518f44ea28444">unlock_and_close</a> (const std::string &amp;target)</td></tr>
<tr class="separator:a5777955384b133127a2518f44ea28444"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd7797d9ecb3d4daf0efc9e4ca0a36ce" id="r_afd7797d9ecb3d4daf0efc9e4ca0a36ce"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d75/classBESFileLockingCache.html#afd7797d9ecb3d4daf0efc9e4ca0a36ce">update_and_purge</a> (const std::string &amp;new_file)</td></tr>
<tr class="memdesc:afd7797d9ecb3d4daf0efc9e4ca0a36ce"><td class="mdescLeft">&#160;</td><td class="mdescRight">Purge files from the cache.  <br /></td></tr>
<tr class="separator:afd7797d9ecb3d4daf0efc9e4ca0a36ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5bf293b1c39103e9d6d0fcb88edabe6a" id="r_a5bf293b1c39103e9d6d0fcb88edabe6a"><td class="memItemLeft" align="right" valign="top">virtual unsigned long long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d75/classBESFileLockingCache.html#a5bf293b1c39103e9d6d0fcb88edabe6a">update_cache_info</a> (const std::string &amp;target)</td></tr>
<tr class="memdesc:a5bf293b1c39103e9d6d0fcb88edabe6a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update the cache info file to include 'target'.  <br /></td></tr>
<tr class="separator:a5bf293b1c39103e9d6d0fcb88edabe6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad49f93b9096993b0eda45192c19e180c" id="r_ad49f93b9096993b0eda45192c19e180c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/db9/classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad49f93b9096993b0eda45192c19e180c">write_cached_data</a> (const std::string &amp;cache_file_name, const <a class="el" href="../../d1/da0/classint.html">int</a> expected_file_size, const std::vector&lt; double &gt; &amp;val)</td></tr>
<tr class="separator:ad49f93b9096993b0eda45192c19e180c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae91208b3c5e6417c7a397f1ad3098c64" id="r_ae91208b3c5e6417c7a397f1ad3098c64"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/db9/classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae91208b3c5e6417c7a397f1ad3098c64">write_cached_data2</a> (const std::string &amp;cache_file_name, const <a class="el" href="../../d1/da0/classint.html">int</a> expected_file_size, const void *buf)</td></tr>
<tr class="separator:ae91208b3c5e6417c7a397f1ad3098c64"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:abf78b713bf1230d3a93bd078be0ec417" id="r_abf78b713bf1230d3a93bd078be0ec417"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d9/db9/classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d75/classBESFileLockingCache.html#abf78b713bf1230d3a93bd078be0ec417">dir_exists</a> (const std::string &amp;dir)</td></tr>
<tr class="separator:abf78b713bf1230d3a93bd078be0ec417"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3947172ce471bba2c3eb081b785ebf7f" id="r_a3947172ce471bba2c3eb081b785ebf7f"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d4/ddd/classBESH4Cache.html">BESH4Cache</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3947172ce471bba2c3eb081b785ebf7f">get_instance</a> ()</td></tr>
<tr class="separator:a3947172ce471bba2c3eb081b785ebf7f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f59726c32041612fc10cbd4a0a36445" id="r_a9f59726c32041612fc10cbd4a0a36445"><td class="memItemLeft" align="right" valign="top">static std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9f59726c32041612fc10cbd4a0a36445">getCacheDirFromConfig</a> ()</td></tr>
<tr class="separator:a9f59726c32041612fc10cbd4a0a36445"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c066979aa996ea5cea2d7d7cd873e7e" id="r_a6c066979aa996ea5cea2d7d7cd873e7e"><td class="memItemLeft" align="right" valign="top">static std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6c066979aa996ea5cea2d7d7cd873e7e">getCachePrefixFromConfig</a> ()</td></tr>
<tr class="separator:a6c066979aa996ea5cea2d7d7cd873e7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d98544526499917189fe42ca9ec445b" id="r_a0d98544526499917189fe42ca9ec445b"><td class="memItemLeft" align="right" valign="top">static long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0d98544526499917189fe42ca9ec445b">getCacheSizeFromConfig</a> ()</td></tr>
<tr class="separator:a0d98544526499917189fe42ca9ec445b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-attribs" name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:a441ae704a651137264f1ba84fdda502c" id="r_a441ae704a651137264f1ba84fdda502c"><td class="memItemLeft" align="right" valign="top">static const std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a441ae704a651137264f1ba84fdda502c">PATH_KEY</a> = &quot;HDF4.Cache.latlon.path&quot;</td></tr>
<tr class="separator:a441ae704a651137264f1ba84fdda502c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9675a1350a8a32d19dd73843d0ce1e2d" id="r_a9675a1350a8a32d19dd73843d0ce1e2d"><td class="memItemLeft" align="right" valign="top">static const std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9675a1350a8a32d19dd73843d0ce1e2d">PREFIX_KEY</a> = &quot;HDF4.Cache.latlon.prefix&quot;</td></tr>
<tr class="separator:a9675a1350a8a32d19dd73843d0ce1e2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ecc174b0c894737fc0b0449c09aa023" id="r_a3ecc174b0c894737fc0b0449c09aa023"><td class="memItemLeft" align="right" valign="top">static const std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3ecc174b0c894737fc0b0449c09aa023">SIZE_KEY</a> = &quot;HDF4.Cache.latlon.size&quot;</td></tr>
<tr class="separator:a3ecc174b0c894737fc0b0449c09aa023"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="../../d3/d09/BESH4MCache_8h_source.html#l00016">16</a> of file <a class="el" href="../../d3/d09/BESH4MCache_8h_source.html">BESH4MCache.h</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a39d6af89035d5c9b5e1aff4e0590a8cc" name="a39d6af89035d5c9b5e1aff4e0590a8cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a39d6af89035d5c9b5e1aff4e0590a8cc">&#9670;&#160;</a></span>cache_enabled()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/db9/classbool.html">bool</a> BESFileLockingCache::cache_enabled </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel inherited">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>Is this cache enabled? </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d28/BESFileLockingCache_8h_source.html#l00200">200</a> of file <a class="el" href="../../d5/d28/BESFileLockingCache_8h_source.html">BESFileLockingCache.h</a>.</p>

</div>
</div>
<a id="af20f88f95e392135f43621d6d29a42f4" name="af20f88f95e392135f43621d6d29a42f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af20f88f95e392135f43621d6d29a42f4">&#9670;&#160;</a></span>cache_too_big()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/db9/classbool.html">bool</a> BESFileLockingCache::cache_too_big </td>
          <td>(</td>
          <td class="paramtype">unsigned long long</td>          <td class="paramname"><span class="paramname"><em>current_size</em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel virtual">virtual</span><span class="mlabel inherited">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>look at the cache size; is it too large? Look at the cache size and see if it is too big. </p>
<dl class="section return"><dt>Returns</dt><dd>True if the size is too big, false otherwise. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d12/BESFileLockingCache_8cc_source.html#l00817">817</a> of file <a class="el" href="../../d3/d12/BESFileLockingCache_8cc_source.html">BESFileLockingCache.cc</a>.</p>

</div>
</div>
<a id="a9e12d93d7fe5f5f03190f92362773050" name="a9e12d93d7fe5f5f03190f92362773050"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e12d93d7fe5f5f03190f92362773050">&#9670;&#160;</a></span>create_and_lock()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/db9/classbool.html">bool</a> BESFileLockingCache::create_and_lock </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;</td>          <td class="paramname"><span class="paramname"><em>target</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/da0/classint.html">int</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>fd</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel virtual">virtual</span><span class="mlabel inherited">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create a file in the cache and lock it for write access. </p>
<p>If the file does not exist, make it, open it for read-write access and get an exclusive lock on it. The locking operation blocks, although that should never happen.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">target</td><td>The name of the file to make/open/lock </td></tr>
    <tr><td class="paramname">fd</td><td>Value-result param that holds the file descriptor of the opened file</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if the operation was successful, false otherwise. This method will return false if the file already existed (the file won't be locked and the descriptor reference is undefined - but likely -1).</dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">BESBESInternalError</td><td>if any error except EEXIST is returned by open(2) or if fcntl(2) returns an error. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d12/BESFileLockingCache_8cc_source.html#l00625">625</a> of file <a class="el" href="../../d3/d12/BESFileLockingCache_8cc_source.html">BESFileLockingCache.cc</a>.</p>

</div>
</div>
<a id="abf78b713bf1230d3a93bd078be0ec417" name="abf78b713bf1230d3a93bd078be0ec417"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf78b713bf1230d3a93bd078be0ec417">&#9670;&#160;</a></span>dir_exists()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/db9/classbool.html">bool</a> BESFileLockingCache::dir_exists </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;</td>          <td class="paramname"><span class="paramname"><em>dir</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span><span class="mlabel inherited">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Does the directory exist?</p>
<dl class="section note"><dt>Note</dt><dd>This is a static method, so it can be called from other static methods like those that build instances of singletons.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dir</td><td>The pathname to test. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if the directory exists, false otherwise </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d12/BESFileLockingCache_8cc_source.html#l01190">1190</a> of file <a class="el" href="../../d3/d12/BESFileLockingCache_8cc_source.html">BESFileLockingCache.cc</a>.</p>

</div>
</div>
<a id="ad1a1e37ad99b3e5a63945f94e1e3d934" name="ad1a1e37ad99b3e5a63945f94e1e3d934"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1a1e37ad99b3e5a63945f94e1e3d934">&#9670;&#160;</a></span>disable()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void BESFileLockingCache::disable </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel inherited">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Disable the cache. </p>

<p class="definition">Definition at line <a class="el" href="../../d5/d28/BESFileLockingCache_8h_source.html#l00205">205</a> of file <a class="el" href="../../d5/d28/BESFileLockingCache_8h_source.html">BESFileLockingCache.h</a>.</p>

</div>
</div>
<a id="aeced251b414de8f2981938d813f39314" name="aeced251b414de8f2981938d813f39314"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeced251b414de8f2981938d813f39314">&#9670;&#160;</a></span>dump()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void BESFileLockingCache::dump </td>
          <td>(</td>
          <td class="paramtype">std::ostream &amp;</td>          <td class="paramname"><span class="paramname"><em>strm</em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel override">override</span><span class="mlabel virtual">virtual</span><span class="mlabel inherited">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>dumps information about this object </p>
<p>Displays the pointer value of this instance along with information about this cache.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">strm</td><td>C++ i/o stream to dump the information to </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="../../d9/d76/classBESObj.html#a4f941a54f97f6da3cda73be934f25985">BESObj</a>.</p>

<p class="definition">Definition at line <a class="el" href="../../d3/d12/BESFileLockingCache_8cc_source.html#l01205">1205</a> of file <a class="el" href="../../d3/d12/BESFileLockingCache_8cc_source.html">BESFileLockingCache.cc</a>.</p>

</div>
</div>
<a id="a8f797d80ea5fd50d236f1f19d1c885cf" name="a8f797d80ea5fd50d236f1f19d1c885cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f797d80ea5fd50d236f1f19d1c885cf">&#9670;&#160;</a></span>enable()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void BESFileLockingCache::enable </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel inherited">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Enable the cache. </p>

<p class="definition">Definition at line <a class="el" href="../../d5/d28/BESFileLockingCache_8h_source.html#l00210">210</a> of file <a class="el" href="../../d5/d28/BESFileLockingCache_8h_source.html">BESFileLockingCache.h</a>.</p>

</div>
</div>
<a id="aa75f998ba8f95f88ba25624ff300f3ec" name="aa75f998ba8f95f88ba25624ff300f3ec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa75f998ba8f95f88ba25624ff300f3ec">&#9670;&#160;</a></span>exclusive_to_shared_lock()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void BESFileLockingCache::exclusive_to_shared_lock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/da0/classint.html">int</a></td>          <td class="paramname"><span class="paramname"><em>fd</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel virtual">virtual</span><span class="mlabel inherited">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Transfer from an exclusive lock to a shared lock. </p>
<p>If the file has an exclusive write lock on it, change that to a shared read lock. This is an atomic operation. If the call to fcntl(2) is protected by locking the cache, a dead lock will result given typical use of this class. This method exists to help with the situation where one process has the cache locked and is blocking on a shared read lock for a file that a second process has locked exclusively (for writing). By changing the exclusive lock to a shared lock, the first process can get its shared lock and then release the cache.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fd</td><td>The file descriptor that is exclusively locked and which, on exit, will have a shared lock. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d12/BESFileLockingCache_8cc_source.html#l00660">660</a> of file <a class="el" href="../../d3/d12/BESFileLockingCache_8cc_source.html">BESFileLockingCache.cc</a>.</p>

</div>
</div>
<a id="a5af3a28f966bbc4b0e942de947835316" name="a5af3a28f966bbc4b0e942de947835316"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5af3a28f966bbc4b0e942de947835316">&#9670;&#160;</a></span>get_cache_directory()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string BESFileLockingCache::get_cache_directory </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel inherited">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>The directory used for the an instance of <a class="el" href="../../dd/d75/classBESFileLockingCache.html" title="Implementation of a caching mechanism for compressed data.">BESFileLockingCache</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d28/BESFileLockingCache_8h_source.html#l00191">191</a> of file <a class="el" href="../../d5/d28/BESFileLockingCache_8h_source.html">BESFileLockingCache.h</a>.</p>

</div>
</div>
<a id="afe5c91d47aeace35bd4fe77615d3eb91" name="afe5c91d47aeace35bd4fe77615d3eb91"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe5c91d47aeace35bd4fe77615d3eb91">&#9670;&#160;</a></span>get_cache_file_name()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d5/d92/classstring.html">string</a> BESFileLockingCache::get_cache_file_name </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;</td>          <td class="paramname"><span class="paramname"><em>src</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/db9/classbool.html">bool</a></td>          <td class="paramname"><span class="paramname"><em>mangle</em></span><span class="paramdefsep"> = </span><span class="paramdefval">true</span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel virtual">virtual</span><span class="mlabel inherited">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns the fully qualified file system path name for the cache file associated with this particular cache resource. This does not look in the cache to see if the fle is present, it just returns the name that will (or is) be used once/if the file is added to the cache.</p>
<dl class="section note"><dt>Note</dt><dd>Names are mangled: ALl occurrences of the characters '&lt;', '&gt;', '=', ',', '/', '(', ')', '"', ''', ':', '?', and ' ' are replaced with the '#' character.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">src</td><td>The source name to (or in the) cache </td></tr>
    <tr><td class="paramname">mangle</td><td>If True, assume the name is a file pathname and mangle it. If false, do not mangle the name (assume the caller has sent a suitable string) but do turn the string into a pathname located in the cache directory with the cache prefix. The 'mangle' param is true by default. </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="../../d8/d0e/classBESUncompressCache.html#a49ee177d0980202eb69228d21afc87ee">BESUncompressCache</a>.</p>

<p class="definition">Definition at line <a class="el" href="../../d3/d12/BESFileLockingCache_8cc_source.html#l00472">472</a> of file <a class="el" href="../../d3/d12/BESFileLockingCache_8cc_source.html">BESFileLockingCache.cc</a>.</p>

</div>
</div>
<a id="addccfa6faacadaa0389dee8f18566d2b" name="addccfa6faacadaa0389dee8f18566d2b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#addccfa6faacadaa0389dee8f18566d2b">&#9670;&#160;</a></span>get_cache_file_prefix()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string BESFileLockingCache::get_cache_file_prefix </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel inherited">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>The prefix used for items in an instance of <a class="el" href="../../dd/d75/classBESFileLockingCache.html" title="Implementation of a caching mechanism for compressed data.">BESFileLockingCache</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d28/BESFileLockingCache_8h_source.html#l00186">186</a> of file <a class="el" href="../../d5/d28/BESFileLockingCache_8h_source.html">BESFileLockingCache.h</a>.</p>

</div>
</div>
<a id="a20d19ed9a8c96bedf8422316b3e8fafa" name="a20d19ed9a8c96bedf8422316b3e8fafa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a20d19ed9a8c96bedf8422316b3e8fafa">&#9670;&#160;</a></span>get_cache_size()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned long long BESFileLockingCache::get_cache_size </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel virtual">virtual</span><span class="mlabel inherited">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the cache size. </p>
<p>Read the size information from the cache info file and return it. This methods locks the cache.</p>
<dl class="section return"><dt>Returns</dt><dd>The size of the cache. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d12/BESFileLockingCache_8cc_source.html#l00829">829</a> of file <a class="el" href="../../d3/d12/BESFileLockingCache_8cc_source.html">BESFileLockingCache.cc</a>.</p>

</div>
</div>
<a id="a2bca0cf643efb0a6d22cd7a5f4b3d6ea" name="a2bca0cf643efb0a6d22cd7a5f4b3d6ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2bca0cf643efb0a6d22cd7a5f4b3d6ea">&#9670;&#160;</a></span>get_data_from_cache()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/db9/classbool.html">bool</a> BESH4Cache::get_data_from_cache </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;</td>          <td class="paramname"><span class="paramname"><em>cache_file_name</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d1/da0/classint.html">int</a></td>          <td class="paramname"><span class="paramname"><em>expected_file_size</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/da0/classint.html">int</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>fd</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d93/BESH4MCache_8cc_source.html#l00153">153</a> of file <a class="el" href="../../dd/d93/BESH4MCache_8cc_source.html">BESH4MCache.cc</a>.</p>

</div>
</div>
<a id="ad0447cb98e124a3deb742ae94c87f0b5" name="ad0447cb98e124a3deb742ae94c87f0b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad0447cb98e124a3deb742ae94c87f0b5">&#9670;&#160;</a></span>get_exclusive_lock()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/db9/classbool.html">bool</a> BESFileLockingCache::get_exclusive_lock </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;</td>          <td class="paramname"><span class="paramname"><em>target</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/da0/classint.html">int</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>ref_fd</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel virtual">virtual</span><span class="mlabel inherited">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>A blocking call to get an exclusive (write) lock on a file in the cache. Because this cache uses per-process advisory locking, it's possible to call this several times <em>from within a single process</em> and get a lock each time.</p>
<dl class="section note"><dt>Note</dt><dd>This is used only by the <a class="el" href="../../dd/d75/classBESFileLockingCache.html#af097935543e9f85317b6751ac9d20a88" title="Purge a single file from the cache.">purge_file()</a> method.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">file_name</td><td>Name of the file to lock </td></tr>
    <tr><td class="paramname">ref_fd</td><td>Return value parameter that holds the file descriptor that is locked. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Return false if the file does not exist, otherwise block until the lock is acquired and then return true. </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../d9/d82/classBESInternalError.html" title="exception thrown if internal error encountered">BESInternalError</a></td><td>is thrown on any condition other than the file not existing </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d12/BESFileLockingCache_8cc_source.html#l01079">1079</a> of file <a class="el" href="../../d3/d12/BESFileLockingCache_8cc_source.html">BESFileLockingCache.cc</a>.</p>

</div>
</div>
<a id="adc6a817d4bfc6756547a9b282c6405c5" name="adc6a817d4bfc6756547a9b282c6405c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc6a817d4bfc6756547a9b282c6405c5">&#9670;&#160;</a></span>get_exclusive_lock_nb()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/db9/classbool.html">bool</a> BESFileLockingCache::get_exclusive_lock_nb </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;</td>          <td class="paramname"><span class="paramname"><em>target</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/da0/classint.html">int</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>ref_fd</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel virtual">virtual</span><span class="mlabel inherited">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>A non-blocking call to get an exclusive (write) lock on a file in the cache. Because this cache uses per-process advisory locking, it's possible to call this several times <em>from within a single process</em> and get a lock each time.</p>
<dl class="section note"><dt>Note</dt><dd>This is used only by the <a class="el" href="../../dd/d75/classBESFileLockingCache.html#afd7797d9ecb3d4daf0efc9e4ca0a36ce" title="Purge files from the cache.">update_and_purge()</a> method.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">file_name</td><td>Name of the file to lock </td></tr>
    <tr><td class="paramname">ref_fd</td><td>Return value parameter that holds the file descriptor that is locked. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Return false if the file does not exist or the non-blocking lock acquisition fails, otherwise the lock is acquired and then return true. </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../d9/d82/classBESInternalError.html" title="exception thrown if internal error encountered">BESInternalError</a></td><td>is thrown on any condition other than the file not existing or the lock being unavailable. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d12/BESFileLockingCache_8cc_source.html#l00920">920</a> of file <a class="el" href="../../d3/d12/BESFileLockingCache_8cc_source.html">BESFileLockingCache.cc</a>.</p>

</div>
</div>
<a id="a3947172ce471bba2c3eb081b785ebf7f" name="a3947172ce471bba2c3eb081b785ebf7f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3947172ce471bba2c3eb081b785ebf7f">&#9670;&#160;</a></span>get_instance()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/ddd/classBESH4Cache.html">BESH4Cache</a> * BESH4Cache::get_instance </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Get the default instance of the <a class="el" href="../../d4/ddd/classBESH4Cache.html">BESH4Cache</a> object. This will read "TheBESKeys" looking for the values of FUNCTION_CACHE_PATH, FUNCTION_CACHE_PREFIX, an FUNCTION_CACHE_SIZE to initialize the cache. </p>

<p class="definition">Definition at line <a class="el" href="../../dd/d93/BESH4MCache_8cc_source.html#l00102">102</a> of file <a class="el" href="../../dd/d93/BESH4MCache_8cc_source.html">BESH4MCache.cc</a>.</p>

</div>
</div>
<a id="aa9ae66ea9b3931933f3f4e02562a8d04" name="aa9ae66ea9b3931933f3f4e02562a8d04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa9ae66ea9b3931933f3f4e02562a8d04">&#9670;&#160;</a></span>get_read_lock()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/db9/classbool.html">bool</a> BESFileLockingCache::get_read_lock </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;</td>          <td class="paramname"><span class="paramname"><em>target</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/da0/classint.html">int</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>fd</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel virtual">virtual</span><span class="mlabel inherited">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get a read-only lock on the file if it exists. </p>
<p>Try to get a read-only lock on the file, blocking until we can get it. If the file does not exist, return false.</p>
<dl class="section note"><dt>Note</dt><dd>If this code returns false, that means the file did not exist in the cache at the time of the test. by the time the caller gets the result, the file may have been added to the cache by another process.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">target</td><td>The path of the cached file </td></tr>
    <tr><td class="paramname">fd</td><td>A value-result parameter set to the locked cached file. Undefined if the file could not be locked for read access. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the file is in the cache and has been locked, false if the file is/was not in the cache. </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">Error</td><td>if the attempt to get the (shared) lock failed for any reason other than that the file does/did not exist. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d12/BESFileLockingCache_8cc_source.html#l00565">565</a> of file <a class="el" href="../../d3/d12/BESFileLockingCache_8cc_source.html">BESFileLockingCache.cc</a>.</p>

</div>
</div>
<a id="a9f59726c32041612fc10cbd4a0a36445" name="a9f59726c32041612fc10cbd4a0a36445"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f59726c32041612fc10cbd4a0a36445">&#9670;&#160;</a></span>getCacheDirFromConfig()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d5/d92/classstring.html">string</a> BESH4Cache::getCacheDirFromConfig </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d93/BESH4MCache_8cc_source.html#l00061">61</a> of file <a class="el" href="../../dd/d93/BESH4MCache_8cc_source.html">BESH4MCache.cc</a>.</p>

</div>
</div>
<a id="a6c066979aa996ea5cea2d7d7cd873e7e" name="a6c066979aa996ea5cea2d7d7cd873e7e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c066979aa996ea5cea2d7d7cd873e7e">&#9670;&#160;</a></span>getCachePrefixFromConfig()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d5/d92/classstring.html">string</a> BESH4Cache::getCachePrefixFromConfig </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d93/BESH4MCache_8cc_source.html#l00046">46</a> of file <a class="el" href="../../dd/d93/BESH4MCache_8cc_source.html">BESH4MCache.cc</a>.</p>

</div>
</div>
<a id="a0d98544526499917189fe42ca9ec445b" name="a0d98544526499917189fe42ca9ec445b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d98544526499917189fe42ca9ec445b">&#9670;&#160;</a></span>getCacheSizeFromConfig()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">long BESH4Cache::getCacheSizeFromConfig </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d93/BESH4MCache_8cc_source.html#l00031">31</a> of file <a class="el" href="../../dd/d93/BESH4MCache_8cc_source.html">BESH4MCache.cc</a>.</p>

</div>
</div>
<a id="a500a4ca2539d42c5aa7c9a702f0647b8" name="a500a4ca2539d42c5aa7c9a702f0647b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a500a4ca2539d42c5aa7c9a702f0647b8">&#9670;&#160;</a></span>initialize()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void BESFileLockingCache::initialize </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;</td>          <td class="paramname"><span class="paramname"><em>cache_dir</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;</td>          <td class="paramname"><span class="paramname"><em>prefix</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long long</td>          <td class="paramname"><span class="paramname"><em>size</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inherited">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initialize an instance of FileLockingCache. </p>
<p>Initialize and instance of FileLockingCache using the passed values for the cache directory, item prefix and max cache size. This will ignore the value of enable_cache() (but will correctly (re)set it based on the directory, ..., values). This provides a way for clients to re-initialize caches on the fly.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cache_dir</td><td>The directory into which the cache files will be written. </td></tr>
    <tr><td class="paramname">prefix</td><td>The prefix that will be added to each cache file. </td></tr>
    <tr><td class="paramname">size</td><td>The size of the cache in MBytes</td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../d9/d82/classBESInternalError.html" title="exception thrown if internal error encountered">BESInternalError</a></td><td>If the cache_dir does not exist or is not writable. size is 0, or if cache dir does not exist. </td></tr>
    <tr><td class="paramname"><a class="el" href="../../d7/dbd/classBESError.html" title="Base exception class for the BES with basic string message.">BESError</a></td><td>If the parameters (directory, ...) are invalid. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d12/BESFileLockingCache_8cc_source.html#l00259">259</a> of file <a class="el" href="../../d3/d12/BESFileLockingCache_8cc_source.html">BESFileLockingCache.cc</a>.</p>

</div>
</div>
<a id="a5b15a24dc9884008c01e487b25da7fbb" name="a5b15a24dc9884008c01e487b25da7fbb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5b15a24dc9884008c01e487b25da7fbb">&#9670;&#160;</a></span>is_unlimited()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/db9/classbool.html">bool</a> BESFileLockingCache::is_unlimited </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel inherited">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Is this cache allowed to store as much as it wants? </p>
<p>If the size of the cache is zero bytes, then it is allowed to grow with out bounds.</p>
<dl class="section return"><dt>Returns</dt><dd>True if the cache is unlimited in size, false if values will be purged after a preset size is exceeded. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d28/BESFileLockingCache_8h_source.html#l00181">181</a> of file <a class="el" href="../../d5/d28/BESFileLockingCache_8h_source.html">BESFileLockingCache.h</a>.</p>

</div>
</div>
<a id="a4b90e5296f6e8f6436851876911ad6a3" name="a4b90e5296f6e8f6436851876911ad6a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b90e5296f6e8f6436851876911ad6a3">&#9670;&#160;</a></span>is_valid()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/db9/classbool.html">bool</a> BESH4Cache::is_valid </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;</td>          <td class="paramname"><span class="paramname"><em>cache_file_name</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d1/da0/classint.html">int</a></td>          <td class="paramname"><span class="paramname"><em>expected_file_size</em></span>&#160;) const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d93/BESH4MCache_8cc_source.html#l00137">137</a> of file <a class="el" href="../../dd/d93/BESH4MCache_8cc_source.html">BESH4MCache.cc</a>.</p>

</div>
</div>
<a id="af097935543e9f85317b6751ac9d20a88" name="af097935543e9f85317b6751ac9d20a88"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af097935543e9f85317b6751ac9d20a88">&#9670;&#160;</a></span>purge_file()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void BESFileLockingCache::purge_file </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;</td>          <td class="paramname"><span class="paramname"><em>file</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel virtual">virtual</span><span class="mlabel inherited">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Purge a single file from the cache. </p>
<p>Purge a single file from the cache. The file might be old, etc., and need to be removed. Don't use this to shrink the cache when it gets too big, use <a class="el" href="../../dd/d75/classBESFileLockingCache.html#afd7797d9ecb3d4daf0efc9e4ca0a36ce" title="Purge files from the cache.">update_and_purge()</a> instead since that file optimizes accesses to the cache control file for several changes in a row.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">file</td><td>The name of the file to purge. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d12/BESFileLockingCache_8cc_source.html#l01125">1125</a> of file <a class="el" href="../../d3/d12/BESFileLockingCache_8cc_source.html">BESFileLockingCache.cc</a>.</p>

</div>
</div>
<a id="a5777955384b133127a2518f44ea28444" name="a5777955384b133127a2518f44ea28444"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5777955384b133127a2518f44ea28444">&#9670;&#160;</a></span>unlock_and_close()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void BESFileLockingCache::unlock_and_close </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;</td>          <td class="paramname"><span class="paramname"><em>target</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel virtual">virtual</span><span class="mlabel inherited">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Get an exclusive lock on the 'cache info' file. The 'cache info' file is used to control certain cache actions, ensuring that they are atomic. These include making sure that the <a class="el" href="../../dd/d75/classBESFileLockingCache.html#a9e12d93d7fe5f5f03190f92362773050" title="Create a file in the cache and lock it for write access.">create_and_lock()</a> and read_and_lock() operations are atomic as well as the purge and related operations.</p>
<dl class="section note"><dt>Note</dt><dd>This is intended to be used internally only but might be useful in some settings. Unlock the named file.</dd></dl>
<p>This does not do any name mangling; it just closes and unlocks whatever is named (or throws BESBESInternalError if the file cannot be closed). If the file was opened more than once, all descriptors are closed. If you need to close a specific descriptor, use the other version of <a class="el" href="../../dd/d75/classBESFileLockingCache.html#a5777955384b133127a2518f44ea28444">unlock_and_close()</a>.</p>
<dl class="section note"><dt>Note</dt><dd>This method assumes that the file was opened/locked using one of read_and_lock() or <a class="el" href="../../dd/d75/classBESFileLockingCache.html#a9e12d93d7fe5f5f03190f92362773050" title="Create a file in the cache and lock it for write access.">create_and_lock()</a>. Those methods record the name/file- descriptor pairs so that the files can be properly closed and locks released.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">file_name</td><td>The name of the file to unlock. </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">BESBESInternalError</td><td></td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d12/BESFileLockingCache_8cc_source.html#l00745">745</a> of file <a class="el" href="../../d3/d12/BESFileLockingCache_8cc_source.html">BESFileLockingCache.cc</a>.</p>

</div>
</div>
<a id="afd7797d9ecb3d4daf0efc9e4ca0a36ce" name="afd7797d9ecb3d4daf0efc9e4ca0a36ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd7797d9ecb3d4daf0efc9e4ca0a36ce">&#9670;&#160;</a></span>update_and_purge()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void BESFileLockingCache::update_and_purge </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;</td>          <td class="paramname"><span class="paramname"><em>new_file</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel virtual">virtual</span><span class="mlabel inherited">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Purge files from the cache. </p>
<p>Purge files, oldest to newest, if the current size of the cache exceeds the size of the cache specified in the constructor. This method uses an exclusive lock on the cache for the duration of the purge process.</p>
<dl class="section note"><dt>Note</dt><dd>If the cache size in bytes is zero, calling this method has no affect (the cache is unlimited in size). Other public methods like <a class="el" href="../../dd/d75/classBESFileLockingCache.html#a5bf293b1c39103e9d6d0fcb88edabe6a" title="Update the cache info file to include &#39;target&#39;.">update_cache_info()</a> and <a class="el" href="../../dd/d75/classBESFileLockingCache.html#a20d19ed9a8c96bedf8422316b3e8fafa" title="Get the cache size.">get_cache_size()</a> still work, however.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">new_file</td><td>Do not delete this file. The name of a file this process just added to the cache. Using fcntl(2) locking there is no way this process can detect its own lock, so the shared read lock on the new file won't keep this process from deleting it (but will keep other processes from deleting it). </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d12/BESFileLockingCache_8cc_source.html#l00977">977</a> of file <a class="el" href="../../d3/d12/BESFileLockingCache_8cc_source.html">BESFileLockingCache.cc</a>.</p>

</div>
</div>
<a id="a5bf293b1c39103e9d6d0fcb88edabe6a" name="a5bf293b1c39103e9d6d0fcb88edabe6a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5bf293b1c39103e9d6d0fcb88edabe6a">&#9670;&#160;</a></span>update_cache_info()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned long long BESFileLockingCache::update_cache_info </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;</td>          <td class="paramname"><span class="paramname"><em>target</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel virtual">virtual</span><span class="mlabel inherited">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Update the cache info file to include 'target'. </p>
<p>Add the size of the named file to the total cache size recorded in the cache info file. The cache info file is exclusively locked by this method for its duration. This updates the cache info file and returns the new size.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">target</td><td>The name of the file </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The new size of the cache </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d12/BESFileLockingCache_8cc_source.html#l00769">769</a> of file <a class="el" href="../../d3/d12/BESFileLockingCache_8cc_source.html">BESFileLockingCache.cc</a>.</p>

</div>
</div>
<a id="ad49f93b9096993b0eda45192c19e180c" name="ad49f93b9096993b0eda45192c19e180c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad49f93b9096993b0eda45192c19e180c">&#9670;&#160;</a></span>write_cached_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/db9/classbool.html">bool</a> BESH4Cache::write_cached_data </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;</td>          <td class="paramname"><span class="paramname"><em>cache_file_name</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d1/da0/classint.html">int</a></td>          <td class="paramname"><span class="paramname"><em>expected_file_size</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; double &gt; &amp;</td>          <td class="paramname"><span class="paramname"><em>val</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d93/BESH4MCache_8cc_source.html#l00176">176</a> of file <a class="el" href="../../dd/d93/BESH4MCache_8cc_source.html">BESH4MCache.cc</a>.</p>

</div>
</div>
<a id="ae91208b3c5e6417c7a397f1ad3098c64" name="ae91208b3c5e6417c7a397f1ad3098c64"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae91208b3c5e6417c7a397f1ad3098c64">&#9670;&#160;</a></span>write_cached_data2()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/db9/classbool.html">bool</a> BESH4Cache::write_cached_data2 </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;</td>          <td class="paramname"><span class="paramname"><em>cache_file_name</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d1/da0/classint.html">int</a></td>          <td class="paramname"><span class="paramname"><em>expected_file_size</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *</td>          <td class="paramname"><span class="paramname"><em>buf</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d93/BESH4MCache_8cc_source.html#l00214">214</a> of file <a class="el" href="../../dd/d93/BESH4MCache_8cc_source.html">BESH4MCache.cc</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a441ae704a651137264f1ba84fdda502c" name="a441ae704a651137264f1ba84fdda502c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a441ae704a651137264f1ba84fdda502c">&#9670;&#160;</a></span>PATH_KEY</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="../../d5/d92/classstring.html">string</a> BESH4Cache::PATH_KEY = &quot;HDF4.Cache.latlon.path&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d09/BESH4MCache_8h_source.html#l00026">26</a> of file <a class="el" href="../../d3/d09/BESH4MCache_8h_source.html">BESH4MCache.h</a>.</p>

</div>
</div>
<a id="a9675a1350a8a32d19dd73843d0ce1e2d" name="a9675a1350a8a32d19dd73843d0ce1e2d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9675a1350a8a32d19dd73843d0ce1e2d">&#9670;&#160;</a></span>PREFIX_KEY</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="../../d5/d92/classstring.html">string</a> BESH4Cache::PREFIX_KEY = &quot;HDF4.Cache.latlon.prefix&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d09/BESH4MCache_8h_source.html#l00027">27</a> of file <a class="el" href="../../d3/d09/BESH4MCache_8h_source.html">BESH4MCache.h</a>.</p>

</div>
</div>
<a id="a3ecc174b0c894737fc0b0449c09aa023" name="a3ecc174b0c894737fc0b0449c09aa023"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3ecc174b0c894737fc0b0449c09aa023">&#9670;&#160;</a></span>SIZE_KEY</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="../../d5/d92/classstring.html">string</a> BESH4Cache::SIZE_KEY = &quot;HDF4.Cache.latlon.size&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d09/BESH4MCache_8h_source.html#l00028">28</a> of file <a class="el" href="../../d3/d09/BESH4MCache_8h_source.html">BESH4MCache.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="../../d3/d09/BESH4MCache_8h_source.html">BESH4MCache.h</a></li>
<li><a class="el" href="../../dd/d93/BESH4MCache_8cc_source.html">BESH4MCache.cc</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../d4/ddd/classBESH4Cache.html">BESH4Cache</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
