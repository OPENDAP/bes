<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>bes: ncml_module::SaxParserWrapper Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">bes<span id="projectnumber">&#160;Updated for version 3.21.1</span>
   </div>
   <div id="projectbrief">The Backend Server (BES) is the lower two tiers of the Hyrax data server</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(1); });
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',false,false,'search.php','Search',true);
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('db/d42/classncml__module_1_1SaxParserWrapper.html','../../'); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="../../d2/dd0/classncml__module_1_1SaxParserWrapper-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">ncml_module::SaxParserWrapper Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Wrapper for libxml SAX parser C callbacks into C++.  
 <a href="#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="../../d7/df9/SaxParserWrapper_8h_source.html">SaxParserWrapper.h</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for ncml_module::SaxParserWrapper:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/dda/classncml__module_1_1SaxParserWrapper__coll__graph.png" border="0" usemap="#ancml__module_1_1SaxParserWrapper_coll__map" alt="Collaboration graph"/></div>
<map name="ancml__module_1_1SaxParserWrapper_coll__map" id="ancml__module_1_1SaxParserWrapper_coll__map">
<area shape="rect" title="Wrapper for libxml SAX parser C callbacks into C++." alt="" coords="5,5,220,211"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ae0a1d67c7166a3730f1b9f9b4be4776e" id="r_ae0a1d67c7166a3730f1b9f9b4be4776e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae0a1d67c7166a3730f1b9f9b4be4776e">deferException</a> (<a class="el" href="../../d7/dbd/classBESError.html">BESError</a> &amp;theErr)</td></tr>
<tr class="memdesc:ae0a1d67c7166a3730f1b9f9b4be4776e"><td class="mdescLeft">&#160;</td><td class="mdescRight">The remaining calls are for the internals of the parser, but need to be public.  <br /></td></tr>
<tr class="separator:ae0a1d67c7166a3730f1b9f9b4be4776e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae384bda977fafe6a9f7b8dbb07c4c0d4" id="r_ae384bda977fafe6a9f7b8dbb07c4c0d4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d1/da0/classint.html">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae384bda977fafe6a9f7b8dbb07c4c0d4">getCurrentParseLine</a> () const</td></tr>
<tr class="separator:ae384bda977fafe6a9f7b8dbb07c4c0d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a813a869e496a04026a26a275dd1fa996" id="r_a813a869e496a04026a26a275dd1fa996"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/d39/classncml__module_1_1SaxParser.html">SaxParser</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a813a869e496a04026a26a275dd1fa996">getParser</a> () const</td></tr>
<tr class="separator:a813a869e496a04026a26a275dd1fa996"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad14b604cefd477605ba29c92e1c9e64" id="r_aad14b604cefd477605ba29c92e1c9e64"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/db9/classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aad14b604cefd477605ba29c92e1c9e64">isExceptionState</a> () const</td></tr>
<tr class="separator:aad14b604cefd477605ba29c92e1c9e64"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9777e263cb39514e66cbffca7832adc6" id="r_a9777e263cb39514e66cbffca7832adc6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/db9/classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9777e263cb39514e66cbffca7832adc6">parse</a> (const std::string &amp;ncmlFilename)</td></tr>
<tr class="memdesc:a9777e263cb39514e66cbffca7832adc6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Do a SAX parse of the ncmlFilename and pass the calls to wrapper parser.  <br /></td></tr>
<tr class="separator:a9777e263cb39514e66cbffca7832adc6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af68aec895c50cce81f43a51c06c9f762" id="r_af68aec895c50cce81f43a51c06c9f762"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af68aec895c50cce81f43a51c06c9f762">rethrowException</a> ()</td></tr>
<tr class="separator:af68aec895c50cce81f43a51c06c9f762"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35b390cf4bfd4abf8996c41b1385c124" id="r_a35b390cf4bfd4abf8996c41b1385c124"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a35b390cf4bfd4abf8996c41b1385c124">SaxParserWrapper</a> (<a class="el" href="../../d3/d39/classncml__module_1_1SaxParser.html">SaxParser</a> &amp;parser)</td></tr>
<tr class="memdesc:a35b390cf4bfd4abf8996c41b1385c124"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a wrapper for the given parser.  <br /></td></tr>
<tr class="separator:a35b390cf4bfd4abf8996c41b1385c124"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Wrapper for libxml SAX parser C callbacks into C++. </p>
<p>On a parse(const string&amp; ncmlFilename) call, the filename is parsed using the libxml C SAX parser and the C callbacks are passed onto our C++ parser via the <a class="el" href="../../d3/d39/classncml__module_1_1SaxParser.html" title="Interface class for the wrapper between libxml C SAX parser and our NCMLParser.">SaxParser</a> interface class.</p>
<p>Since the underlying libxml is C and uses its internal static memory pools which will be used by other parts of the BES, we have to be careful with exceptions. Any <a class="el" href="../../d7/dbd/classBESError.html" title="Base exception class for the BES with basic string message.">BESError</a> thrown in a <a class="el" href="../../d3/d39/classncml__module_1_1SaxParser.html" title="Interface class for the wrapper between libxml C SAX parser and our NCMLParser.">SaxParser</a> callback is caught and deferred (stored in this). We enter an error state and ignore all further callbacks until the libxml parser exits cleanly. Then we recreate and rethrow the deferred exception.</p>
<p>Any other exception types (...) are also caught and a local <a class="el" href="../../d9/d82/classBESInternalError.html" title="exception thrown if internal error encountered">BESInternalError</a> is thrown at parse end, so be careful with which exceptions are thrown in <a class="el" href="../../d3/d39/classncml__module_1_1SaxParser.html" title="Interface class for the wrapper between libxml C SAX parser and our NCMLParser.">SaxParser</a> callbacks.</p>
<dl class="section author"><dt>Author</dt><dd>mjohnson <a href="#" onclick="location.href='mai'+'lto:'+'m.j'+'oh'+'nso'+'n@'+'ope'+'nd'+'ap.'+'or'+'g'; return false;">m.joh<span class="obfuscator">.nosp@m.</span>nson<span class="obfuscator">.nosp@m.</span>@open<span class="obfuscator">.nosp@m.</span>dap.<span class="obfuscator">.nosp@m.</span>org</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d7/df9/SaxParserWrapper_8h_source.html#l00059">59</a> of file <a class="el" href="../../d7/df9/SaxParserWrapper_8h_source.html">SaxParserWrapper.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a35b390cf4bfd4abf8996c41b1385c124" name="a35b390cf4bfd4abf8996c41b1385c124"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a35b390cf4bfd4abf8996c41b1385c124">&#9670;&#160;</a></span>SaxParserWrapper()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">SaxParserWrapper::SaxParserWrapper </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/d39/classncml__module_1_1SaxParser.html">SaxParser</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>parser</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel explicit">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create a wrapper for the given parser. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">parser</td><td>Must exist for the duration of the life of the wrapper. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dd/d79/SaxParserWrapper_8cc_source.html#l00305">305</a> of file <a class="el" href="../../dd/d79/SaxParserWrapper_8cc_source.html">SaxParserWrapper.cc</a>.</p>

</div>
</div>
<a id="a63974f5e33d6691775364956318438fe" name="a63974f5e33d6691775364956318438fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a63974f5e33d6691775364956318438fe">&#9670;&#160;</a></span>~SaxParserWrapper()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">SaxParserWrapper::~SaxParserWrapper </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel virtual">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d79/SaxParserWrapper_8cc_source.html#l00310">310</a> of file <a class="el" href="../../dd/d79/SaxParserWrapper_8cc_source.html">SaxParserWrapper.cc</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ae0a1d67c7166a3730f1b9f9b4be4776e" name="ae0a1d67c7166a3730f1b9f9b4be4776e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae0a1d67c7166a3730f1b9f9b4be4776e">&#9670;&#160;</a></span>deferException()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SaxParserWrapper::deferException </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d7/dbd/classBESError.html">BESError</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>theErr</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The remaining calls are for the internals of the parser, but need to be public. </p>
<p>If we get a <a class="el" href="../../d7/dbd/classBESError.html" title="Base exception class for the BES with basic string message.">BESError</a> exception thrown in a <a class="el" href="../../d3/d39/classncml__module_1_1SaxParser.html" title="Interface class for the wrapper between libxml C SAX parser and our NCMLParser.">SaxParser</a> call, defer it by entering the EXCEPTION state and copying the exception. In EXCEPTION state, we don't pass on any callbacks to <a class="el" href="../../d3/d39/classncml__module_1_1SaxParser.html" title="Interface class for the wrapper between libxml C SAX parser and our NCMLParser.">SaxParser</a>. When the underlying C parser completes and cleans up its storage, then we recreate and throw the exception. NOTE: We can't store theErr itself since it will be destroyed by the exception system. </p><dl class="section see"><dt>See also</dt><dd><a class="el" href="#af68aec895c50cce81f43a51c06c9f762">rethrowException</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dd/d79/SaxParserWrapper_8cc_source.html#l00343">343</a> of file <a class="el" href="../../dd/d79/SaxParserWrapper_8cc_source.html">SaxParserWrapper.cc</a>.</p>

</div>
</div>
<a id="ae384bda977fafe6a9f7b8dbb07c4c0d4" name="ae384bda977fafe6a9f7b8dbb07c4c0d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae384bda977fafe6a9f7b8dbb07c4c0d4">&#9670;&#160;</a></span>getCurrentParseLine()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d1/da0/classint.html">int</a> SaxParserWrapper::getCurrentParseLine </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return the current line of the parse we're on, assuming we're not in an exception state and that we are parsing. </p>

<p class="definition">Definition at line <a class="el" href="../../dd/d79/SaxParserWrapper_8cc_source.html#l00380">380</a> of file <a class="el" href="../../dd/d79/SaxParserWrapper_8cc_source.html">SaxParserWrapper.cc</a>.</p>

</div>
</div>
<a id="a813a869e496a04026a26a275dd1fa996" name="a813a869e496a04026a26a275dd1fa996"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a813a869e496a04026a26a275dd1fa996">&#9670;&#160;</a></span>getParser()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d39/classncml__module_1_1SaxParser.html">SaxParser</a> &amp; ncml_module::SaxParserWrapper::getParser </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/df9/SaxParserWrapper_8h_source.html#l00129">129</a> of file <a class="el" href="../../d7/df9/SaxParserWrapper_8h_source.html">SaxParserWrapper.h</a>.</p>

</div>
</div>
<a id="aad14b604cefd477605ba29c92e1c9e64" name="aad14b604cefd477605ba29c92e1c9e64"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad14b604cefd477605ba29c92e1c9e64">&#9670;&#160;</a></span>isExceptionState()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/db9/classbool.html">bool</a> ncml_module::SaxParserWrapper::isExceptionState </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Used by the callbacks to know whether we have a deferred exception. </p>

<p class="definition">Definition at line <a class="el" href="../../d7/df9/SaxParserWrapper_8h_source.html#l00150">150</a> of file <a class="el" href="../../d7/df9/SaxParserWrapper_8h_source.html">SaxParserWrapper.h</a>.</p>

</div>
</div>
<a id="a9777e263cb39514e66cbffca7832adc6" name="a9777e263cb39514e66cbffca7832adc6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9777e263cb39514e66cbffca7832adc6">&#9670;&#160;</a></span>parse()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/db9/classbool.html">bool</a> SaxParserWrapper::parse </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;</td>          <td class="paramname"><span class="paramname"><em>ncmlFilename</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Do a SAX parse of the ncmlFilename and pass the calls to wrapper parser. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td>to the file to parse.</td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">Can</td><td>throw <a class="el" href="../../d7/dbd/classBESError.html" title="Base exception class for the BES with basic string message.">BESError</a> via <a class="el" href="../../d3/d39/classncml__module_1_1SaxParser.html" title="Interface class for the wrapper between libxml C SAX parser and our NCMLParser.">SaxParser</a></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>successful parse </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dd/d79/SaxParserWrapper_8cc_source.html#l00319">319</a> of file <a class="el" href="../../dd/d79/SaxParserWrapper_8cc_source.html">SaxParserWrapper.cc</a>.</p>

</div>
</div>
<a id="af68aec895c50cce81f43a51c06c9f762" name="af68aec895c50cce81f43a51c06c9f762"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af68aec895c50cce81f43a51c06c9f762">&#9670;&#160;</a></span>rethrowException()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SaxParserWrapper::rethrowException </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>If there's a deferred exception, this will throw the right subclass type from the preserved state at deferral time. </p>

<p class="definition">Definition at line <a class="el" href="../../dd/d79/SaxParserWrapper_8cc_source.html#l00354">354</a> of file <a class="el" href="../../dd/d79/SaxParserWrapper_8cc_source.html">SaxParserWrapper.cc</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="../../d7/df9/SaxParserWrapper_8h_source.html">SaxParserWrapper.h</a></li>
<li><a class="el" href="../../dd/d79/SaxParserWrapper_8cc_source.html">SaxParserWrapper.cc</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../d1/d6a/namespacencml__module.html">ncml_module</a></li><li class="navelem"><a class="el" href="../../db/d42/classncml__module_1_1SaxParserWrapper.html">SaxParserWrapper</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
